{{ $src := .Get "src" }}
{{ $alt := .Get "alt" | default "圖片" }}
{{ $caption := .Get "caption" }}
{{ $class := .Get "class" | default "responsive-img" }}

{{ if $src }}
<figure style="margin: 1.5rem 0; text-align: center;">
    <img src="{{ $src }}" alt="{{ $alt }}" loading="lazy" decoding="async" 
         style="max-width: 100%; height: auto; border-radius: 8px; box-shadow: 0 4px 8px rgba(0,0,0,0.1);">
    {{ with $caption }}<figcaption style="margin-top: 0.5rem; font-size: 0.9rem; color: var(--secondary); font-style: italic;">{{ . | markdownify }}</figcaption>{{ end }}
</figure>
{{ else }}
<p style="color: red;">⚠️ 請提供圖片來源 (src)</p>
{{ end }}